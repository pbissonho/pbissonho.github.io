(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{138:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return c})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return s}));var o=n(2),a=n(9),i=(n(0),n(177)),r={title:"Koin for Flutter"},c={id:"start/getting-started/koin-for-flutter",isDocsHomePage:!1,title:"Koin for Flutter",description:"Starting Koin for Flutter",source:"@site/docs/start/getting-started/koin-for-flutter.md",permalink:"/docs/start/getting-started/koin-for-flutter",editUrl:"https://github.com/pbissonho/koin.dart/tree/master/website/docs/start/getting-started/koin-for-flutter.md",sidebar:"docs",previous:{title:"Testing",permalink:"/docs/start/getting-started/testing"},next:{title:"Definitions",permalink:"/docs/reference/koin-core/definitions"}},l=[{value:"Starting Koin for Flutter",id:"starting-koin-for-flutter",children:[]},{value:"Flutter Components as KoinComponents",id:"flutter-components-as-koincomponents",children:[]},{value:"Extended Scope API",id:"extended-scope-api",children:[]}],p={rightToc:l};function s(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(i.b)("wrapper",Object(o.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"starting-koin-for-flutter"},"Starting Koin for Flutter"),Object(i.b)("p",null,"In any Flutter Widget:"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-dart"}),"void main() {\n  startKoin((app) {\n    app.printLogger(level: Level.debug);\n    app.module(myModule);\n  });\n  runApp(MyApp());\n}\n")),Object(i.b)("h2",{id:"flutter-components-as-koincomponents"},"Flutter Components as KoinComponents"),Object(i.b)("p",null,Object(i.b)("inlineCode",{parentName:"p"},"StatefulWidget"),", are extended by Koin to be considered as ",Object(i.b)("inlineCode",{parentName:"p"},"KoinComponent")," out of the box:"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-dart"}),"class LoginPage extends StatefulWidget {\n  @override\n  _LoginPageState createState() => _LoginPageState();\n}\n\nclass _LoginPageState extends State<LoginPage> {\n  LoginBloc bloc;\n  Lazy<LoginBloc> lazyBloc;\n\n  @override\n  void initState() {\n    // Lazy Inject MyPresenter\n    lazyBloc = currentScope.inject();\n\n    // or directly retrieve instance\n    bloc = get();\n    super.initState();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Container();\n  }\n}\n")),Object(i.b)("p",null,"Those classes can then use:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"get()")," or ",Object(i.b)("inlineCode",{parentName:"li"},"by inject()")," instance retrieving"),Object(i.b)("li",{parentName:"ul"},Object(i.b)("inlineCode",{parentName:"li"},"getKoin()")," to access th current ",Object(i.b)("inlineCode",{parentName:"li"},"Koin")," instance")),Object(i.b)("p",null,"If you need to inject dependencies from another class and can't declare it in a module, you can still tag it with ",Object(i.b)("inlineCode",{parentName:"p"},"KoinComponent")," interface."),Object(i.b)("h2",{id:"extended-scope-api"},"Extended Scope API"),Object(i.b)("p",null,"Scope API is more close to the Flutter platform. The ",Object(i.b)("inlineCode",{parentName:"p"},"StatefulWidget"),"  have extensions for Scope API: ",Object(i.b)("inlineCode",{parentName:"p"},"currentScope")," get the current associated Koin scope.  "),Object(i.b)("p",null,"Koin gives the ",Object(i.b)("inlineCode",{parentName:"p"},"ScopeStateMixin")," mixin already bound to your Flutter ",Object(i.b)("inlineCode",{parentName:"p"},"StatefulWidget")," lifecycle. On ",Object(i.b)("inlineCode",{parentName:"p"},"dispose()")," is calld, it will close automatically. ScopeStateMixin overrides the ",Object(i.b)("inlineCode",{parentName:"p"},"dispose")," method to call the ",Object(i.b)("inlineCode",{parentName:"p"},"close")," method of the current scope."),Object(i.b)("p",null,"You can use the ",Object(i.b)("inlineCode",{parentName:"p"},"ScopeStateMixin")," in ",Object(i.b)("inlineCode",{parentName:"p"},"StatefulWidget")," to close automatically the scope when the widget is removed from the tree. Whenever there is a scope associated with a ",Object(i.b)("inlineCode",{parentName:"p"},"StatefulWidget")," you must use the ",Object(i.b)("inlineCode",{parentName:"p"},"ScopeStateMixin")," or manually call the ",Object(i.b)("inlineCode",{parentName:"p"},"currentScope.close"),'" function in the ',Object(i.b)("inlineCode",{parentName:"p"},"dispose")," lifecycle widget function."),Object(i.b)("div",{className:"admonition admonition-important alert alert--info"},Object(i.b)("div",Object(o.a)({parentName:"div"},{className:"admonition-heading"}),Object(i.b)("h5",{parentName:"div"},Object(i.b)("span",Object(o.a)({parentName:"h5"},{className:"admonition-icon"}),Object(i.b)("svg",Object(o.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(i.b)("path",Object(o.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"important")),Object(i.b)("div",Object(o.a)({parentName:"div"},{className:"admonition-content"}),Object(i.b)("p",{parentName:"div"},"If the ",Object(i.b)("inlineCode",{parentName:"p"},"ScopeStateMixin")," is not used and you do not call ",Object(i.b)("inlineCode",{parentName:"p"},"currentScope.close")," the instantiated scope for each instance of this Widget will not be closed, that is, the StatefulWidget will be removed from the tree, but the scope associated with it will remain in memory."))),Object(i.b)("p",null,"You can use directly the associated Koin scope to retrieve components:"),Object(i.b)("p",null,"Easy to declare your Flutter Widgets's scope:"),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-dart"}),"class LoginPage extends StatefulWidget {\n  @override\n  _LoginPageState createState() => _LoginPageState();\n}\n\nclass _LoginPageState extends State<LoginPage> {\n  LoginBloc loginBlock;\n\n  @override\n  void initState() {\n    // or directly retrieve instance\n    loginBlock = currentScope.get();\n    super.initState();\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    return Container();\n  }\n}\n")),Object(i.b)("pre",null,Object(i.b)("code",Object(o.a)({parentName:"pre"},{className:"language-dart"}),"final loginModule = Module()\n  // Declare a scope to LoginPage\n  ..scope<LoginPage>((s) {\n    s.scoped((s) => LoginBloc());\n  });\n")),Object(i.b)("p",null,"Any StatefulWidget can use directly the scope API: ",Object(i.b)("inlineCode",{parentName:"p"},"createScope()"),", ",Object(i.b)("inlineCode",{parentName:"p"},"getScope()")," and ",Object(i.b)("inlineCode",{parentName:"p"},"deleteScope()"),"."))}s.isMDXComponent=!0},177:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var o=n(0),a=n.n(o);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=a.a.createContext({}),s=function(e){var t=a.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},d=function(e){var t=s(e.components);return a.a.createElement(p.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},u=a.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,r=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=s(n),u=o,m=d["".concat(r,".").concat(u)]||d[u]||b[u]||i;return n?a.a.createElement(m,c(c({ref:t},p),{},{components:n})):a.a.createElement(m,c({ref:t},p))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,r[1]=c;for(var p=2;p<i;p++)r[p]=n[p];return a.a.createElement.apply(null,r)}return a.a.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);