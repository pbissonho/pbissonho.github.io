<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<title data-react-helmet="true">Scopes | Koin.dart</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Scopes | Koin.dart"><meta data-react-helmet="true" name="description" content="Koin brings a simple API to let you define instances that are tied to a limit lifetime."><meta data-react-helmet="true" property="og:description" content="Koin brings a simple API to let you define instances that are tied to a limit lifetime."><meta data-react-helmet="true" property="og:url" content="http://koindart.dev//docs/reference/koin-core/scopes"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="http://koindart.dev//docs/reference/koin-core/scopes"><link rel="stylesheet" href="/styles.6cfdaf64.css">
<link rel="preload" href="/styles.1f3aeaad.js" as="script">
<link rel="preload" href="/runtime~main.36448218.js" as="script">
<link rel="preload" href="/main.e748858a.js" as="script">
<link rel="preload" href="/1.4ccf6aee.js" as="script">
<link rel="preload" href="/2.38ca7586.js" as="script">
<link rel="preload" href="/38.d094fca7.js" as="script">
<link rel="preload" href="/39.fb15d4e5.js" as="script">
<link rel="preload" href="/20ac7829.421e885e.js" as="script">
<link rel="preload" href="/17896441.1e620660.js" as="script">
<link rel="preload" href="/1d36ddce.e400fb77.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="koin.dart logo"><strong class="navbar__title">Koin.dart</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/pbissonho/koin.dart" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/logo.svg" alt="koin.dart logo"><strong class="navbar__title">Koin.dart</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a href="https://github.com/pbissonho/koin.dart" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Koin.dart</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/setup">Setup</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/resources">Resources</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/support">Support</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Koin in 5 minutes</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/start/quickstart/dart">Dart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/start/quickstart/flutter">Flutter</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/start/quickstart/test">Test</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/start/getting-started/starting-koin">Start Koin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/start/getting-started/modules-definitions">Modules Definitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/start/getting-started/koin-components">Koin Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/start/getting-started/testing">Testing</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/start/getting-started/koin-for-flutter">Koin for Flutter</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Core</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/koin-core/definitions">Definitions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/koin-core/modules">Modules</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/koin-core/start-koin">Start Koin</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/koin-core/koin-component">Koin Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/koin-core/injection-parameters">Injection Parameter</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/reference/koin-core/scopes">Scopes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/reference/koin-core/logging">Logging</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Flutter</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/koin-flutter/start">Start</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/koin-flutter/scope">Scope</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/koin-flutter/scope_provider">ScopeProvider</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/koin-flutter/get-instances">Get Instances</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/koin-flutter/bloc_library">Bloc Library</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/koin-flutter/disposable">Disposable</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Test</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/reference/koin-test/testing">Testing</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/docs/devTools">DevTools</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Examples</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/flutter_examples">Flutter Examples</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Scopes</h1></header><div class="markdown"><p>Koin brings a simple API to let you define instances that are tied to a limit lifetime.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="what-is-a-scope"></a>What is a scope?<a aria-hidden="true" tabindex="-1" class="hash-link" href="#what-is-a-scope" title="Direct link to heading">#</a></h2><p>Scope is a fixed duration of time or method calls in which an object exists.
Another way to look at this is to think of scope as the amount of time an object’s state persists.
When the scope context ends, any objects bound under that scope cannot be injected again (they are dropped from the container).</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="scope-definition"></a>Scope definition<a aria-hidden="true" tabindex="-1" class="hash-link" href="#scope-definition" title="Direct link to heading">#</a></h2><p>By default in Koin, we have 3 kind of scopes:</p><ul><li><code>single</code> definition, create an object that persistent with the entire container lifetime (can&#x27;t be dropped).</li><li><code>factory</code> definition, create a new object each time. Short live. No persistence in the container (can&#x27;t be shared).</li><li><code>scoped</code> definition, create an object that persistent tied to the associated scope lifetime.</li></ul><p>To declare a scoped definition, use the <code>scoped</code> function like follow. A scope gathers scoped definitions as a logical unit of time:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">module()..scopeWithType(named(&#x27;A Scope Name&#x27;),(scope){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  scope.scoped((s) =&gt; ComponentA());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>A scope require a <em>qualifier</em> to help name it. It can be either a String Qualifier, either a TypeQualifier</p></div></div><p>Declaring a scope for a given type, can be done:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">module()..scopeWithType(named&lt;MyType&gt;(),(scope){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  scope.scoped((s) =&gt; ComponentA());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div></div></div></div></div><p>or can even declared directly like this:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">module()..scope&lt;MyType&gt;((scope){</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  scope.scoped((s) =&gt; ComponentA());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">});</span></div></div></div></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="using-a-scope"></a>Using a Scope<a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-a-scope" title="Direct link to heading">#</a></h2><p>Let&#x27;s have those classes</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class A {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class B {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class C {}</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="declare-a-scoped-instance"></a>Declare a Scoped Instance<a aria-hidden="true" tabindex="-1" class="hash-link" href="#declare-a-scoped-instance" title="Direct link to heading">#</a></h3><p>Let&#x27;s scope <code>B</code> &amp; <code>C</code> instances from <code>A</code>, <code>B</code> &amp; <code>C</code> instances are tied to a <code>A</code> instance:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">module()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ..factory((s) =&gt; A())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ..scope&lt;A&gt;((scope) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    scope.scoped((s) =&gt; B());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    scope.scoped((s) =&gt; C());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="create-a-scope-and-retrieve-dependencies"></a>Create a scope and retrieve dependencies<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create-a-scope-and-retrieve-dependencies" title="Direct link to heading">#</a></h3><p>Below is how we can create scope &amp; retrieve dependencies</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Get A from Koin&#x27;s main scope</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var a = koin.get&lt;A&gt;()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Get/Create Scope for `a`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var scopeForA = a.getOrCreateScope();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Get scoped instances from `a`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var b = scopeForA.get&lt;B&gt;();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var c = scopeForA.get&lt;C&gt;();</span></div></div></div></div></div><p>We use the <code>getOrCreateScope</code> function, that will create a scope define by the type.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>Note here that <code>scopeForA</code> is tied to <code>a</code> instance object</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="using-the-scope-property"></a>Using the <code>scope</code> property<a aria-hidden="true" tabindex="-1" class="hash-link" href="#using-the-scope-property" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Get A from Koin&#x27;s main scope</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var a = koin.get&lt;A&gt;()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Get scoped instances from `a`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var b = a.scope.get&lt;B&gt;()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var c = a.scope.get&lt;C&gt;()</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="destroy-scope-and-linked-instances"></a>Destroy scope and linked instances<a aria-hidden="true" tabindex="-1" class="hash-link" href="#destroy-scope-and-linked-instances" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// Destroy `a` scope &amp; drop `b` &amp; `c`</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">a.closeScope();</span></div></div></div></div></div><p>We use the <code>closeScope</code> function, to drop current scope &amp; related scoped instances.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="more-about-scope-api"></a>More about Scope API<a aria-hidden="true" tabindex="-1" class="hash-link" href="#more-about-scope-api" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="working-with-a-scope"></a>Working with a scope<a aria-hidden="true" tabindex="-1" class="hash-link" href="#working-with-a-scope" title="Direct link to heading">#</a></h3><p>A scope instance can be created with as follow: <code>var scope = koin.createScope(id,qualifier);</code>. <code>id</code> is a ScopeId and <code>qualifier</code> the scope qualifier.</p><p>To resolve a dependency using the scope we can do it like:</p><ul><li><code>var presenter = scope.get&lt;Presenter&gt;()</code> - directly using the get/inject functions from the scope instance</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="create--retrieve-a-scope"></a>Create &amp; retrieve a scope<a aria-hidden="true" tabindex="-1" class="hash-link" href="#create--retrieve-a-scope" title="Direct link to heading">#</a></h3><p>From your <code>Koin</code> instance you can access:</p><ul><li><code>createScope(id : ScopeID, scopeName : Qualifier)</code> - create a closed scope instance with given id and scopeName</li><li><code>getScope(id : ScopeID)</code> - retrieve a previously created scope with given id</li><li><code>getOrCreateScope(id : ScopeID, scopeName : Qualifier)</code> - create or retrieve if already created, the closed scope instance with given id and scopeName</li></ul><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Make the difference between a scope instance id, which is the id to find your scope over all your scopes, and the scope name, which is the reference to the tied scope group name.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="resolving-dependencies-within-a-scope"></a>Resolving dependencies within a scope<a aria-hidden="true" tabindex="-1" class="hash-link" href="#resolving-dependencies-within-a-scope" title="Direct link to heading">#</a></h3><p>The interest of a scope is to define a common logical unit of time for scoped definitions. It&#x27;s allow also to resolve definitions from within the given scope</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// given the classes</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class ComponentA {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class ComponentB {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  final ComponentA componentA;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ComponentB(this.componentA);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// module with scope</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">module()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ..scopeWithType(named(&quot;A_SCOPE_NAME&quot;), (scope) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    scope.scoped((s) =&gt; ComponentA());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    // will resolve from current scope instance</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    scope.scoped((s) =&gt; ComponentB(s.get()));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span></div></div></div></div></div><p>The dependency resolution is then straight forward:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// create an closed scope instance &quot;myScope1&quot; for scope &quot;A_SCOPE_NAME&quot;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var myScope1 = koin.createScope(&quot;myScope1&quot;,named(&quot;A_SCOPE_NAME&quot;));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// from the same scope</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var componentA = myScope1.get&lt;ComponentA&gt;();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var componentB = myScope1.get&lt;ComponentB&gt;();</span></div></div></div></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>By default, all scope fallback to resolve in main scope if no definition is found in the current scope</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="closing-a-scope"></a>Closing a scope<a aria-hidden="true" tabindex="-1" class="hash-link" href="#closing-a-scope" title="Direct link to heading">#</a></h3><p>Once your scope instance is finished, just closed it with the <code>close()</code> function:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">// from a KoinComponent</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var session = getKoin().createScope(&quot;session&quot;);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// use it ...</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// close it</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">session.close();</span></div></div></div></div></div><div class="admonition admonition-important alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>important</h5></div><div class="admonition-content"><p>Beware that you can&#x27;t inject instances anymore from a closed scope.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="getting-scopes-source-value"></a>Getting scope&#x27;s source value<a aria-hidden="true" tabindex="-1" class="hash-link" href="#getting-scopes-source-value" title="Direct link to heading">#</a></h3><p>Koin Scope API in 2.1.4 allow you to pass the original source of a scope, in a definition. Let&#x27;s take an example below.
Let&#x27;s have a singleton instance <code>A</code>:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">class A {}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">class BofA {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  final A a;</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  BofA(this.a);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var myModuleA = module()..single((s) =&gt; A())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ..scope&lt;A&gt;((scope) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    scope.scoped((s) =&gt; BofA(s.getSource()));</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span></div></div></div></div></div><p>By creating A&#x27;s scope, we can forward the reference of the scope&#x27;s source (A instance), to underlying definitions of the scope: <code>scoped { BofA(getSource()) }</code> or even <code>scoped { BofA(get()) }</code></p><p>This in order to avoid cascading parameter injection, and just retrieve our source value directly in scoped definition.</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var a = koin.get&lt;A&gt;()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var b = a.scope.get&lt;BofA&gt;()</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">expect(b.a, a);</span></div></div></div></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><blockquote><p>Difference between <code>getSource()</code> and <code>get()</code>: getSource will directly get the source value. Get will try to resolve any definition, and fallback to source
value if possible. <code>getSource()</code> is then more efficient in terms of performances.</p></blockquote></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="scope-linking"></a>Scope Linking<a aria-hidden="true" tabindex="-1" class="hash-link" href="#scope-linking" title="Direct link to heading">#</a></h3><p>Koin Scope API allow you to link a scope to another, and then allow to resolve joined definition space. Let&#x27;s take an example.
Here we are defining, 2 scopes spaces: a scope for A and a scope for B. In A&#x27;s scope, we don&#x27;t have access to C (defined in B&#x27;s scope).</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">module()..single((s) =&gt; A())</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  ..scope&lt;A&gt;((scope) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    scope.scoped((s) =&gt; B());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  })..scope&lt;B&gt;((scope) {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    scope.scoped((s) =&gt; C());</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">  });</span></div></div></div></div></div><p>With scope linking API, we can allow to resolve B&#x27;s scope instance C, directly from A&#x27;scope. For this we use <code>linkTo()</code> on scope instance:</p><div class="mdxCodeBlock_iHAB"><div class="codeBlockContent_32p_"><button type="button" aria-label="Copy code to clipboard" class="copyButton_1BYj">Copy</button><div tabindex="0" class="prism-code language-dart codeBlock_19pQ"><div class="codeBlockLines_2n9r" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">var a = koin.get&lt;A&gt;();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// let&#x27;s get B from A&#x27;s scope</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">var b = a.scope.get&lt;B&gt;();</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// let&#x27;s link A&#x27; scope to B&#x27;s scope</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">a.scope.linkTo(b.scope);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">// we got the same C instance from A or B scope</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">expect(a.scope.get&lt;C&gt;(), b.scope.get&lt;C&gt;());</span></div></div></div></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="scope-callback----todo"></a>Scope callback -- TODO<a aria-hidden="true" tabindex="-1" class="hash-link" href="#scope-callback----todo" title="Direct link to heading">#</a></h3></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/pbissonho/koin.dart/tree/master/website/docs/reference/koin-core/scopes.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/reference/koin-core/injection-parameters"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Injection Parameter</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/reference/koin-core/logging"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Logging »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-a-scope" class="table-of-contents__link">What is a scope?</a></li><li><a href="#scope-definition" class="table-of-contents__link">Scope definition</a></li><li><a href="#using-a-scope" class="table-of-contents__link">Using a Scope</a><ul><li><a href="#declare-a-scoped-instance" class="table-of-contents__link">Declare a Scoped Instance</a></li><li><a href="#create-a-scope-and-retrieve-dependencies" class="table-of-contents__link">Create a scope and retrieve dependencies</a></li><li><a href="#using-the-scope-property" class="table-of-contents__link">Using the <code>scope</code> property</a></li><li><a href="#destroy-scope-and-linked-instances" class="table-of-contents__link">Destroy scope and linked instances</a></li></ul></li><li><a href="#more-about-scope-api" class="table-of-contents__link">More about Scope API</a><ul><li><a href="#working-with-a-scope" class="table-of-contents__link">Working with a scope</a></li><li><a href="#create--retrieve-a-scope" class="table-of-contents__link">Create &amp; retrieve a scope</a></li><li><a href="#resolving-dependencies-within-a-scope" class="table-of-contents__link">Resolving dependencies within a scope</a></li><li><a href="#closing-a-scope" class="table-of-contents__link">Closing a scope</a></li><li><a href="#getting-scopes-source-value" class="table-of-contents__link">Getting scope&#39;s source value</a></li><li><a href="#scope-linking" class="table-of-contents__link">Scope Linking</a></li><li><a href="#scope-callback----todo" class="table-of-contents__link">Scope callback -- TODO</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/doc2/">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/koindart" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/pbissonho/koin.dart" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright © 2021 Koin team, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.1f3aeaad.js"></script>
<script src="/runtime~main.36448218.js"></script>
<script src="/main.e748858a.js"></script>
<script src="/1.4ccf6aee.js"></script>
<script src="/2.38ca7586.js"></script>
<script src="/38.d094fca7.js"></script>
<script src="/39.fb15d4e5.js"></script>
<script src="/20ac7829.421e885e.js"></script>
<script src="/17896441.1e620660.js"></script>
<script src="/1d36ddce.e400fb77.js"></script>
</body>
</html>